<DOCTYPE! html>

<html lang="en">
    <head>
        <title>Ch'eats</title>

        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

        <style>
            body, html {
            height: 100%;
            margin: 0;
            }

            .bg {
                /* The image used */
                background-image: linear-gradient( rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7) ), url("https://source.unsplash.com/featured/?food");

                /* Full height */
                height: 100%;

                /* Center and scale the image nicely */
                background-position: center;
                background-repeat: no-repeat;
                background-size: cover;
            }

            .navbar {
                overflow: hidden;
                background-color: white;
                font-family: Arial, Helvetica, sans-serif;
            }

            .navbar a {
                float: left;
                font-size: 16px;
                color: black;
                text-align: center;
                padding: 14px 16px;
                text-decoration: none;
            }

            .dropdown {
                float: left;
                overflow: hidden;
            }

            .dropdown .dropbtn {
                cursor: pointer;
                font-size: 16px;
                border: none;
                outline: none;
                color: black;
                padding: 14px 16px;
                background-color: inherit;
                font-family: inherit;
                margin: 0;
            }

            .navbar a:hover, .dropdown:hover .dropbtn, .dropbtn:focus {
                background-color: #bbb;
            }

            .dropdown-content {
                display: none;
                position: absolute;
                background-color: #green;
                min-width: 160px;
                box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
                z-index: 1;
            }

            .dropdown-content a {
                float: none;
                color: blue;
                padding: 12px 16px;
                text-decoration: none;
                display: block;
                text-align: left;
            }

            .dropdown-content a:hover {
                background-color: #999;
            }

            .show {
                display: block;
            }
        </style>



        <script type="text/javascript">

            var settings = {
                "async": true,
                "crossDomain": true,
                "url": "https://google-translate1.p.rapidapi.com/language/translate/v2",
                "method": "POST",
                "headers": {
                    "x-rapidapi-host": "google-translate1.p.rapidapi.com",
                    "x-rapidapi-key": "26f7215a9cmshfd2f82aff494a97p1af0abjsn648069b4979a",
                    "content-type": "application/x-www-form-urlencoded"
                },
                "data": {
                    "source": "en",
                    "q": "What would you like to eat? | FAQ | Contact Us",
                    "target": ""
                }

            }

            $(document).ready(function(){
                $(".dropdown-item").click(function(e){

                    if($(this).attr("tolang") != 'en'){
                        settings.data.target = $(this).attr("tolang");
                        fetchTranslation();
                        $('button').html($(this).html());

                    } else {
                        updatePlaceholders(settings.data.q);
                        $('#langSel').html("Translate to");
                    }

                });
            });

            function fetchTranslation(){
                $.ajax(settings).done(function (response) {
                    console.log(response);
                    var translatedText = response.data.translations[0].translatedText;
                    updatePlaceholders(translatedText);
                });
            }

            function updatePlaceholders(updateString){
                var comp = updateString.split('|')

                $('form > input').each(function(idx){
                    $(this).prop("placeholder", comp[idx+1].trim() );
                });

                $("#formHeading").html(comp[0]);
            }

        </script>
    </head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <body>

        <div class="navbar">
            <a href="#home">Home</a>
            <a href="#faq">FAQ</a>
            <a href="#contact us">Contact Us</a>
            <div class="dropdown">
                <button class="dropbtn" onclick="myFunction()">Translate
                    <i class="fa fa-caret-down"></i>
                </button>
                <div class="dropdown-content" id="myDropdown">
                    <a href="#">English</a>
                    <a href="#">Espanol</a>
                </div>
            </div>
        </div>

        <div class="bg">
            <form method="POST">
                <div class="search-box">
                    <input class="search-txt" type="text" name="search" size="30" placeholder="What would you like to eat?">
                    <input class="search-btn" type="image" name="button" id="submit-search" src="https://img.icons8.com/pastel-glyph/64/000000/search.png">
                </div>
            </form>
        </div>
        <script>
            /* When the user clicks on the button, 
            toggle between hiding and showing the dropdown content */
            function myFunction() {
              document.getElementById("myDropdown").classList.toggle("show");
            }
            // Close the dropdown if the user clicks outside of it
            window.onclick = function(e) {
              if (!e.target.matches('.dropbtn')) {
              var myDropdown = document.getElementById("myDropdown");
                if (myDropdown.classList.contains('show')) {
                  myDropdown.classList.remove('show');
                }
              }
            }
            </script>
    </body>
    <footer>
        <!--Js scripts from server side need to be included here are the render loads html and js from top down-->
        <script src="{{url_for('static', filename='index.js')}}"></script>

    </footer>
</html>